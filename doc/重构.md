# 重构

## 坏味道

+ 重复代码

+ 过长函数

  ​	提炼信号，不超过50行

  + 需要注释的代码，就应该考虑提炼函数，试着用方法名代替注释
  + 条件表达式
  + 循环

+ 过长参数

  ​	不超过3个参数

+ 过大的类

  ​	不超过500行

+ 发散式变化

  ​	一个工具类7个函数，如果添加一个新的依赖，需要修改3个函数，添加另一个依赖，需要修改另外4个函数，就建议将这个类拆分为俩个类

+ 霰弹式修改

  ​	如果添加一个依赖，需要在很多个类中小修改，就考虑把这些小修改提炼到一个类

+ 依赖情结

  ​	如果一个类的方法，对于另一个类过于依赖，比如A#a,调用B半数以上方法，就建议将a挪到B

+ 数据泥团

  ​	两个类相同的字段，许多函数相同的参数，需要考虑结合

+ 基本类型偏执

  ​	尽量使用对象，充当参数

+ 少使用switch

  ​	尽量减少switch使用，比如使用多态替换他

+ 平行继承体系

  ​	每当你为一个类增加一个子类，就必须也为另一个类相对应增加一个子类，你就要考虑多重继承

+ 赘余类

  ​	没有必要的类，试着合并到其他类中

+ 只比目标多一步

  ​	可以考虑未来，但不要考虑太远，比现实多一步就可以

+ 临时字段

  ​	提炼对立的对象

+ 过度耦合的消息链

  ​	避免A->B->C->D,A通过B再通过C再通过D获得信息

+ 中间人

  ​	过多使用代理，有很多不干实事的函数

+  过于亲密关系

  ​	两个类互相试图调用彼此的private类，这时候试着提炼公共方法

+ 异曲同工的类

  ​	俩个函数坐同一件事，但参数列表不同，这时候试着提炼公共方法

+ 不完美的类库

  ​	为不完美的类库，封装

+ 纯稚的数据类

  ​	pojo封装赋值，取值，字段私有化

+ 被拒绝的遗赠

  ​	子类不想继承父类的所有方法和属性，只想继承部分内容

+ 过多的注释

  ​	代码清晰，不需要过多的注释